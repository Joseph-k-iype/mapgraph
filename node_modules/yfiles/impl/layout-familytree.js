/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.6.0.4.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2024 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,r){"use strict";function t(f){var n=new $.C.GGD,r=n.$blf;r.$bIf=new $.C.DHD.$w(0,!1),r.$suf=60,r.$gtf=20;var t=n.$hlf;switch(f.$f7){case-1:t.$dSf=0;break;case 0:t.$dSf=.5;break;case 1:t.$dSf=1}return n}function i($,f,n){for(var r=0,t=0,i=f.$izf();i.$nJ;i.$WO()){var l=i.$zK;1===n.$hP(l)?l.$f7>0&&t++:r+=l.$f6}return t<=1&&2===r}function l(f,n,r){var t=n.$jPg($.O.$p56);f.$f16=n.$tCg(),f.$f17=n.$tCg(),f.$f3=n.$tCg(),f.$f4=n.$tCg(),f.$f12 instanceof $.C.GGD&&0!==f.$f20&&(f.$f=f.$f12.$Qcg(n)),function(f,n,r){f.$f5=$.HF.$m14(n.$hv),f.$f1=new $.LE;var t=new $.LE;f.$f11=new $.C.RKB.$v,f.$f2=n.$uCg(),f.$f15=n.$uCg(),f.$f6=n.$uCg(),f.$f9=n.$uCg(),f.$f8=n.$uCg(),f.$f19=new $.SE;for(var i=n.$wDg();i.$nJ;i.$WO()){var l=new $.C.RKB.$v,u=i.$zK;f.$f2.$KV(u,"n"+u.$hg),1===n.$jPg($.O.$p56).$hP(u)?e(f,u,l):a(f,u,l);var s=new $.LE;s.$m(l),o(f,l,s);for(var h=0;h<s.$oC;h++)if((l=s.$rC(h)).$f1>1){for(var g=new $.LH.$c1("GN"),v=0;v<l.$f1;v++)g.$m2($.PF.$m8(l.$rC(v).$hg)),g.$m2("/");t.$m(g.toString()),f.$f1.$m(l)}}for(var m=0;m<f.$f1.$oC;m++){var c=new $.C.JJB(0,0,0,0),O=n.$kBg(),l=f.$f1.$rC(m);f.$f11.$m6(O);for(var C=0;C<l.$f1;C++){var w=l.$rC(C);f.$f15.$KV(w,t.$rC(m)),f.$f9.$KV(w,r),f.$f8.$KV(w,c)}f.$f8.$KV(O,c),f.$f6.$NE(O,!0),f.$f2.$KV(O,t.$rC(m))}n.$sfg($.O.$p4,f.$f2),n.$sfg($.O.$p36,f.$f15),n.$sfg($.O.$p3,f.$f6),n.$sfg($.O.$p70,f.$f8),n.$sfg($.O.$p26,f.$f9)}(f,n,r);for(var i=n.$jPg($.O.$p1),l=n.$wDg();l.$nJ;l.$WO()){var u=l.$zK;if(1===n.$jPg($.O.$p56).$hP(u)){for(var s=null,h=u.$jRg(null);h.$nJ;h.$WO()){var g=h.$yK.$f3;if(null===s&&(s=g),n.$whg(h.$yK,new $.C.SJB.$w(0,n.$m38(h.$yK.$f2).$WL/2)),n.$yhg(h.$yK,new $.C.SJB.$w(0,-n.$m38(h.$yK.$f3).$WL/2)),f.$f3.$KV(h.$yK,$.T.ADD.$w(2,!0)),f.$f4.$KV(h.$yK,$.T.ADD.$w(1,!0)),null!==f.$f&&s!==g){var v=null===i?s:i.$hP(s),m=null===i?g:i.$hP(g);(4===f.$f20||3===f.$f20)!==(2===t.$hP(g))?f.$f.$DY(v,m):f.$f.$GY(v,m)}}for(var c=new $.LE,O="CG"+u.$hg,C=u.$jRg(null);C.$nJ;C.$WO()){var w=C.$yK;f.$f16.$KV(w,O);var K=f.$f15.$hP(w.$f3);null!==K&&-1!==c.indexOf(K)||(f.$f17.$KV(w,O),null!==K&&c.$m(K))}}}n.$sfg($.O.$p120,f.$f16),n.$sfg($.O.$p121,f.$f17),n.$sfg($.O.$p181,f.$f3),n.$sfg($.O.$p182,f.$f4)}function e(f,n,r){if(1!==n.$f2.$jPg($.O.$p56).$hP(n))throw $.NG.$m30(K[5]);if(!f.$f5[n.$hg]){r.$m6(n),f.$f5[n.$hg]=!0;for(var t=0,i=n.$XEg();i.$nJ;i.$WO())if(a(f,i.$zK,r),++t>2)throw $.NG.$m30(K[6])}}function a(f,n,r){if(1===n.$f2.$jPg($.O.$p56).$hP(n))throw $.NG.$m30(K[7]);if(!f.$f5[n.$hg]){r.$m6(n),f.$f5[n.$hg]=!0;for(var t=n.$NEg();t.$nJ;t.$WO())e(f,t.$zK,r)}}function o(f,n,r){var t=-1,i=-1;for(t=0;t<n.$f1;t++){var l=n.$rC(t);if(1===l.$f2.$jPg($.O.$p56).$hP(l)){for(var e=l.$NEg();e.$nJ&&!((i=n.indexOf(e.$zK))>-1);e.$WO());if(i>-1)break}}if(-1!==i){var a=new $.C.RKB.$v,h=n.$rC(t),g=n.$rC(i),v=new $.C.RKB.$v;n.$iI(g),a.$m6(g);for(e=g.$NEg();e.$nJ;e.$WO()){var m=e.$zK;n.$iI(m),a.$m6(m);for(var c=m.$XEg();c.$nJ;c.$WO()){var O=c.$zK;O!==g&&(u(f,m,O,h,g)?s(f,m,n,a):v.$m6(m))}}if(n.$jAf()){n.$rGg(a),v.$eI(),n.$iI(g),a.$m6(g);for(e=g.$NEg();e.$nJ;e.$WO()){m=e.$zK;n.$iI(m),a.$m6(m),v.$m6(m)}}for(e=v.$izf();e.$nJ;e.$WO())for(var C=e.$zK.$mPg(null);C.$nJ;C.$WO())if(C.$yK.$f2!==g){var w=g.$f2;w.$whg(C.$yK,new $.C.SJB.$w(0,0)),w.$yhg(C.$yK,new $.C.SJB.$w(0,0)),f.$f3.$KV(C.$yK,$.T.ADD.$w(0,!0)),f.$f4.$KV(C.$yK,$.T.ADD.$w(0,!0)),f.$f19.$m(C.$yK)}o(f,n,r),o(f,a,r),r.$m(a)}}function u(f,n,r,t,i){return function f(n,r,t,i,l,e){if(!$.QE.$m9(e,new $.T.ZED.T(r,t)))return!0;var a=!0;for(var o=t.$NEg();o.$nJ;o.$WO()){var u=o.$zK;if(u!==r){if(u===i)return!1;for(var s=u.$XEg();s.$nJ;s.$WO()){var h=s.$zK;if(h!==t&&!f(n,u,h,i,l,e)){a=!1;break}}}}return a}(f,n,r,t,i,new $.SE)}function s($,f,n,r){for(var t=f.$XEg();t.$nJ;t.$WO()){var i=t.$zK;if(!(n.indexOf(i)<0)){n.$iI(i),r.$m6(i);for(var l=i.$NEg();l.$nJ;l.$WO()){var e=l.$zK;n.indexOf(e)>-1&&(n.$iI(e),r.$m6(e),s($,e,n,r))}}}}function h($,f,n,r){for(var t=1,i=f.$XEg();i.$nJ;i.$WO()){var l=i.$zK;if(l!==n&&-1===r.indexOf(l)){r.$m6(l);for(var e=l.$NEg();e.$nJ;e.$WO()){var a=e.$zK;a!==f&&(t+=h($,a,l,r))}}}return t}var g=f.lang.ClassDefinition,v=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),m=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),c=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),O=(f.lang.String,f.lang.decorators.Type),C=f.lang.decorators.SetterArg,w=f.lang.decorators.OptionArgs;f.lang.addMappings("yFiles-for-HTML-Complete-2.6.0.4-Evaluation (Build 78f656e575a7-09/10/2024)",{get _$_wzd(){return["alignment","$ey",O("yfiles._R.C.BFD",5)]},_$_xzd:["topLayout","$fy"],_$_awf:["partnerlessBelow","$cZf"],_$_lsg:["offsetForFamilyNodes","$Rlf"],_$_wbh:["familyNodesAlwaysBelow","$Lqf"],get _$_qmh(){return["familyMembersSortingPolicy","$nvf",O("yfiles._R.C.CFD",5)]},_$_tnh:["spacingBetweenFamilyMembers","$Twf"],get _$_hqo(){return["FamilyTreeLayout","ZED",w(C("topLayout"),C("spacingBetweenFamilyMembers"),C("offsetForFamilyNodes"),C("partnerlessBelow"),C("familyNodesAlwaysBelow"),C("alignment","yfiles._R.C.BFD"),C("parallelEdgeRouterEnabled"),C("selfLoopRouterEnabled"),C("familyMembersSortingPolicy","yfiles._R.C.CFD"),C("labeling"),C("selfLoopRouter"),C("parallelEdgeRouter"),C("componentLayout"),C("subgraphLayout"),C("hideGroupsStage"),C("orientationLayout"),C("orientationLayoutEnabled"),C("layoutOrientation","yfiles._R.C.FZC"),C("labelingEnabled"),C("hideGroupsStageEnabled"),C("componentLayoutEnabled"),C("subgraphLayoutEnabled"))]},_$_iqo:["FamilyType","AFD"],_$_jqo:["VerticalNodeAlignment","BFD"],_$_kqo:["FamilyMembersSortingPolicy","CFD"],_$$_jdb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var K=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];m("_$$_jdb",function($){$._$_kqo=new v(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),m("_$$_jdb",function(n){n._$_hqo=new g(function(){return{$extends:$.C.TBD,constructor:function(){$.C.TBD.call(this),this.$f=null,this.$eqf=!1,this.$mcf.$sCf=12,this.$f12=t(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_xzd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?t(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$fy;return $.C.XAD.isInstance(f)&&(f=f.$QM),f instanceof $.C.GGD},_$_tnh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.NG.$m2();this.$f13=f}},_$_lsg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.NG.$m2();this.$f14=f}},_$_awf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_wbh:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_wzd:{get:function(){return this.$f7},set:function(f){var n=0;switch(f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.NG.$m18(K[0])}null!==this.$f12&&this.$f12 instanceof $.C.GGD&&(this.$f12.$hlf.$dSf=n),this.$f7=f}},$Bvf:{set:function($){this.$f49=$}},$Hof:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_qmh:{get:function(){return this.$f20},set:function(f){switch(f){case 0:case 1:case 2:case 3:case 4:this.$f20=f;break;default:throw $.NG.$m2()}}},$dRg:function(f){if(null===f.$jPg($.O.$p56))throw $.NG.$m28(K[1]+$.O.$p56+K[2]);var n=new $.C.JLB(f),r=f.$jPg($.O.$p3),t=f.$jPg($.O.$p36),i=f.$jPg($.O.$p4),e=f.$jPg($.O.$p70),a=new $.C.JLB(f),o=null,u=$.T.KLB.$H(),s=$.T.KLB.$H(),h=$.T.KLB.$H(),g=$.T.KLB.$H(),v=$.T.KLB.$F(),m=null;if(function(f,n){f.$f21=$.T.KLB.$H();var r=n.$jPg($.O.$p56);if(null!==r)for(var t=n.$wDg();t.$nJ;t.$WO()){var i=t.$zK;1===r.$hP(i)&&f.$f21.$QV(i,i.$f7)}}(this,f),function(f,n){f.$f22=$.T.KLB.$H();var r=n.$jPg($.O.$p56);if(null!==r)for(var t=n.$wDg();t.$nJ;t.$WO()){var i=t.$zK;1===r.$hP(i)&&f.$f22.$QV(i,i.$f6)}}(this,f),null!==r){o=f.$tCg();for(var O=!1,C=f.$vDg();C.$nJ;C.$WO()){var w=C.$yK;r.$GE(w.$f2)!==r.$GE(w.$f3)?(o.$NE(w,!0),a.$QGg(w),O=!0):o.$NE(w,!1)}O||(f.$bOg(o),o=null);for(var p=f.$wDg();p.$nJ;p.$WO()){var P=p.$zK;r.$GE(P)&&(v.$KV(i.$hP(P),P),n.$SGg(P),u.$NE(P,!0),s.$KV(P,t.$hP(P)),h.$KV(P,i.$hP(P)),g.$KV(P,e.$hP(P)))}null!==r&&f.$LUg($.O.$p3),null!==t&&f.$LUg($.O.$p36),null!==i&&f.$LUg($.O.$p4),null!==e&&f.$LUg($.O.$p70)}var L=new $.T.ZED.T1(this);if(l(this,f,L),null!==r){var _=new $.C.NLB(f);for(p=f.$wDg();p.$nJ;p.$WO()){P=p.$zK;if(_.$MMg(P)){var y=new $.LE;u.$NE(P,!1);for(var E=_.$KMg(P).$m4();E.$p;){var d=E.$m(),B=t.$hP(d);if(null!==B){for(var W=0;W<y.$oC;W++)if(B===t.$hP(y.$rC(W))){B=null;break}null!==B&&y.$m(d)}}if(0===y.$oC){d=_.$KMg(P).$PBg();s.$KV(P,t.$hP(d)),h.$KV(P,i.$hP(d))}else if(s.$KV(P,t.$hP(y.$rC(0))),h.$KV(P,i.$hP(y.$rC(0))),y.$oC>1){for(var D=0;D<y.$oC;D++)for(var J=v.$hP(t.$hP(y.$rC(D))),T=0;T<y.$oC;T++){var b=v.$hP(t.$hP(y.$rC(T)));c.equals(i.$hP(b),t.$hP(J))&&y.$m3(T)}if(s.$KV(P,t.$hP(y.$rC(0))),h.$KV(P,i.$hP(y.$rC(0))),1===y.$oC);else{null===m&&(m=new $.C.RKB.$v);var z=f.$kBg();m.$m6(z),u.$NE(z,!0),h.$KV(z,z);for(W=1;W<y.$oC;W++)for(var M=y.$rC(0),A=!1;null!==M;){for(var j=v.$hP(t.$hP(M)),R=y.$rC(W);null!==R;){var V=v.$hP(t.$hP(R));if(V===j){if(y.$rC(0)!==M)for(var N=0;N<W;N++)y.$uC(N,M);y.$uC(W,R),A=!0;break}R=V}if(A)break;for(N=0;N<W;N++)y.$uC(N,M);M=j}for(W=0;W<y.$oC;W++)s.$KV(y.$rC(W),z);s.$KV(z,t.$hP(y.$rC(0))),n.$SGg(z)}}}else u.$NE(P,!1),s.$KV(P,t.$hP(P)),h.$KV(P,i.$hP(P))}_.$vBg()}var F=new $.T.ZED.T2(this,this.$fy),G=new $.T.ZED.T4(n,r,u,s,h,g,F),S=new $.C.QBD;S.$QM=G;var x=new $.C.KAD(S,null);x.$XSf=this.$m1();try{new $.T.ZED.T3(this,x,L,F).$fQ(f)}finally{!function(f,n){null!==f.$f16&&(n.$LUg($.O.$p120),n.$bOg(f.$f16),f.$f16=null),null!==f.$f17&&(n.$LUg($.O.$p121),n.$bOg(f.$f17),f.$f17=null),null!==f.$f3&&(n.$LUg($.O.$p181),n.$bOg(f.$f3),f.$f3=null),null!==f.$f4&&(n.$LUg($.O.$p182),n.$bOg(f.$f4),f.$f4=null),null!==f.$f8&&(n.$LUg($.O.$p70),n.$cOg(f.$f8),f.$f8=null),null!==f.$f9&&(n.$LUg($.O.$p26),n.$cOg(f.$f9),f.$f9=null),null!==f.$f2&&(n.$LUg($.O.$p4),n.$cOg(f.$f2),f.$f2=null),null!==f.$f15&&(n.$LUg($.O.$p36),n.$cOg(f.$f15),f.$f15=null),null!==f.$f6&&(n.$LUg($.O.$p3),n.$cOg(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$uO(),f.$f=null),f.$f19=null}(this,f),null!==r&&f.$sfg($.O.$p3,r),null!==t&&f.$sfg($.O.$p36,t),null!==i&&f.$sfg($.O.$p4,i),null!==e&&f.$sfg($.O.$p70,e)}if(n.$TBg(),null!==m){for(W=0;W<m.$f1;W++)f.$zKg(m.$rC(W));m=null}if(a.$TBg(),null!==this.$f1)for(W=0;W<this.$f1.$oC;W++)f.$zKg(this.$f11.$rC(W));if(null!==o){f.$sfg($.O.$p102,o);var I=new $.C.GLD;I.$bgf=$.O.$p102;try{I.$fQ(f)}finally{f.$LUg($.O.$p102),f.$bOg(o)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new g(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n){$.C.RBD.call(this,n),this.$f=f,this.$f1=$.T.KLB.$G()},$f1:null,"$m!":function($){return this.$f1.$hP($)},"$fQ!":function($){if(this.$QM.$fQ($),this.$f.$m1())for(var f=$.$wDg();f.$nJ;f.$WO())for(var n=f.$zK.$mPg(null);n.$nJ;n.$WO()){var r=n.$yK;this.$f1.$KV(r,$.$EUg(r))}},$f:null}}),T3:new g(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,r,t){$.C.RBD.call(this,n),this.$f=f,this.$f2=r,this.$f1=t},$f2:null,$f1:null,"$fQ!":function(f){if(this.$f.$m1()){var n=new $.C.NLB(f),r=$.T.KLB.$H();!function(f,n,r,t){for(var l=r.$jPg($.O.$p56),e=f.$f.$f11.$izf();e.$nJ;e.$WO()){var a=e.$zK,o=n.$KMg(a);if(i(0,o,l)){t.$NE(a,!0);for(var u=o.$izf();u.$nJ;u.$WO()){var s=u.$zK;if(1!==l.$hP(s))for(var h=s.$mPg(null);h.$nJ;h.$WO())f.$f.$f4.$KV(h.$yK,null)}}}}(this,n,f,r),this.$QM.$fQ(f),function(f,n,r,t,i){for(var l=n.$jPg($.O.$p56),e=f.$f.$f11.$izf();e.$nJ;e.$WO()){var a=e.$zK;if(t.$GE(a)){for(var o=r.$KMg(a),u=null,s=null,h=o.$izf();h.$nJ;h.$WO()){var g=h.$zK;1!==l.$hP(g)&&g.$f6>0&&(null===u?u=g:s=g)}if(null!==u&&null!==s){var v=n.$bKg(u),m=n.$bKg(s),c=i.$m(u.$f11).$f,O=i.$m(s.$f11).$f;if(v>m&&c<O||v<m&&c>O){var C=n.$cPg(a);for(h=o.$izf();h.$nJ;h.$WO()){g=h.$zK;var w=C.$f+C.$f3-(n.$bKg(g)-C.$f);n.$Gjg(g,w,n.$cKg(g))}}}}}}(this,f,n,r,this.$f1),function(f,n,r,t){for(var i=n.$jPg($.O.$p56),l=f.$f.$f11.$izf();l.$nJ;l.$WO()){var e=l.$zK;if(t.$GE(e))for(var a=r.$KMg(e).$izf();a.$nJ;a.$WO()){var o=a.$zK;if(1!==i.$hP(o))for(var u=o.$mPg(null);u.$nJ;u.$WO()){var s=u.$yK;n.$yhg(s,new $.C.SJB.$w(0,-n.$m38(o).$WL/2)),f.$f.$f4.$KV(s,$.T.ADD.$w(1,!0))}}}}(this,f,n,r),f.$sfg($.O.$p70,this.$f.$f8);var t=this.$f1.$QM;t.$fCf=0,this.$f2.$f1=!0,this.$QM.$fQ(f),t.$fCf=1,this.$f2.$f1=!1,f.$LUg($.O.$p163),n.$vBg()}else this.$QM.$fQ(f)},$f:null}}),T4:new g(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,r,t,i,l,e){$.C.RBD.call(this,e),this.$f=f,this.$f1=n,this.$f2=r,this.$f5=t,this.$f4=i,this.$f3=l},"$fQ!":function(f){var n=new $.C.RKB.$w(this.$f.$SEg());this.$f.$TBg(),null!==this.$f1&&(f.$sfg($.O.$p3,this.$f2),f.$sfg($.O.$p36,this.$f5),f.$sfg($.O.$p4,this.$f4),f.$sfg($.O.$p70,this.$f3)),this.$hAg(f),this.$f.$TGg(n),f.$LUg($.O.$p3),f.$LUg($.O.$p36),f.$LUg($.O.$p4),f.$LUg($.O.$p70)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new g(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new g(function(){return{$final:!0,$with:[$.C.VAD],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.KLB.$H(),this.$f2=new $.T.ZED.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$fQ!":function(f){if(1!==f.$hv){if(2===f.$hv&&this.$f.$f10&&this.$f.$f22.$nP(f.$gv)<2&&this.$f.$f22.$nP(f.$vs)<2){for(var n=null,r=null,t=f.$wDg();t.$nJ;t.$WO()){var i=t.$zK;1!==f.$jPg($.O.$p56).$hP(i)?n=i:r=i}if(null!==n&&null!==r){var l=f.$m38(n),e=f.$m38(r);l.$WW(-l.$AL/2,0),e.$WW(-e.$AL/2,l.$WL+this.$f.$f14);for(var a=r.$mPg(null);a.$nJ;a.$WO()){var o=a.$yK;($$=f.$m37(o)).$IP(),$$.$jM=new $.C.SJB.$w(0,0),$$.$kM=new $.C.SJB.$w(0,0)}var u=this.$f.$f8.$hP(n),s=new $.C.JJB(u.top,u.left,-this.$f.$f14-f.$m38(r).$WL,u.right);return void this.$f.$f8.$KV(n,s)}}var g=new $.C.RKB.$v;if(this.$f1)g.$qGg(f.$wDg()),g.$UGg(new $.T.ZED.T1.T1(this,f));else{var v=new $.C.RKB.$v,m=new $.C.RKB.$v;for(t=f.$wDg();t.$nJ;t.$WO()){i=t.$zK;1!==f.$jPg($.O.$p56).$hP(i)?v.$m6(i):m.$m6(i)}for(var c=null,O=0,C=0;C<v.$f1;C++){(U=v.$rC(C)).$NEg().$xK>O&&(O=U.$NEg().$xK,c=U)}v.$iI(c),g.$m6(c),function f(n,r,t,i,l){for(var e=new $.C.RKB.$v,a=l.$NEg();a.$nJ;a.$WO()){var o=a.$zK;if(t.$iI(o)){var u=h(n,o,l,new $.C.RKB.$x(l));n.$f3.$QV(o,u),e.$m6(o)}}e.$UGg(n.$f2);var s=l.$f2.$jPg($.O.$p56),g=!1;if(1===e.$f1&&i.indexOf(l)===i.$f1-1&&(g=!0),2===n.$f.$f20||4===n.$f.$f20)for(var v=0;v<e.$f1;v++)4===n.$f.$f20===(2===s.$hP(l))?i.$m6(e.$rC(v)):i.$mI(0,e.$rC(v));else if(0!==n.$f.$f20&&1===i.$f1&&1===e.$f1)3===n.$f.$f20===(2===s.$hP(l))?i.$m6(e.$rC(0)):i.$mI(0,e.$rC(0));else{var m=i.indexOf(l),c=i.indexOf(l)+1;for(v=0;v<e.$f1;v++)v%2!==0||g?i.$mI(c,e.$rC(v)):i.$mI(m,e.$rC(v)),c++}var O=new $.C.RKB.$v;for(v=0;v<e.$f1;v++){for(var C=!1,w=null,K=(o=e.$rC(v)).$XEg();K.$nJ;K.$WO())if((w=K.$zK)!==l){C=!0;break}if(r.$iI(w)){O.$m6(w);var p=i.indexOf(o);i.indexOf(l)>p?i.$mI(i.indexOf(o),w):i.$mI(i.indexOf(o)+1,w)}else if(C){var P=0;for(i.$iI(o),K=o.$XEg();K.$nJ;K.$WO())P=Math.max(i.indexOf(K.$zK),P);i.$mI(P,o)}}e=null;for(v=0;v<O.$f1;v++)f(n,r,t,i,O.$rC(v))}(this,v,m,g,c)}var w=new $.C.RKB.$v,K=new $.C.RKB.$v,p=new $.LE,P=0,L=0,_=Number.MAX_VALUE;for(C=0;C<g.$f1;C++){i=g.$rC(C);var y=f.$m38(i);1===f.$jPg($.O.$p56).$hP(i)?(w.$m6(i),p.$m(C),y.$WW(P+Math.max((this.$f.$f13-y.$AL)/2,y.$AL/4),-y.$WL/2),P=P+Math.max(1.5*y.$AL,this.$f.$f13)|0):(K.$m6(i),_=Math.min(y.$WL,_),L=Math.max(y.$WL,L),y.$WW(P,-y.$WL/2),P=P+y.$AL|0)}if(0!==this.$f.$f7)for(C=0;C<K.$f1;C++){y=f.$m38(K.$rC(C));1===this.$f.$f7?y.$WW(y.$lJ,-(y.$WL-_/2)):y.$WW(y.$lJ,-_/2)}var E=$.HF.$m11(g.$f1),d=-2;for(C=0;C<w.$f1;C++){var B=w.$rC(C),W=!1,D=$.ZE.$m8(p.$rC(C));if(this.$f.$f18||d===D-1&&0===E[d])W=!0;else for(var J=B.$XEg();J.$nJ;J.$WO()){var T=J.$zK,b=g.indexOf(T)-D;if(Math.abs(b)>2){W=!0;break}}if(W)E[D]=1;else{var z=new $.C.SJB.$w(0,0);for(a=B.$mPg(null);a.$nJ;a.$WO()){o=a.$yK;if(($$=f.$m37(o)).$IP(),0===this.$f.$f7)$$.$jM=z;else{y=f.$m38(o.$f2);f.$vhg(o,new $.C.SJB.$w(y.$lJ+y.$AL/2,0))}$$.$kM=z}w.$m9(C),p.$m3(C),C--}d=D}var M,A=L/2;1===this.$f.$f7?A=_/2:-1===this.$f.$f7&&(A=L-_/2),M=A;for(C=0;C<w.$f1;C++){B=w.$rC(C);for(var j=$.ZE.$m8(p.$rC(C)),R=0,V=B.$XEg();V.$nJ;V.$WO()){for(var N=g.indexOf(V.$zK),F=Math.min(j,N),G=Math.max(j,N),S=0,x=F;x<=G;x++)S+=E[x];R=Math.max(S,R)}y=f.$m38(B);var I=A+this.$f.$f14+(y.$WL+this.$f.$f14)*(R-1);y.$WW(y.$lJ,I),M=Math.max(M,I+y.$WL)}for(var Q=0;Q<K.$f1;Q++){var U=K.$rC(Q),k=g.indexOf(U),H=0,q=new $.C.VIB.$v;for(a=U.$jRg(null);a.$nJ;a.$WO()){o=a.$yK;E[g.indexOf(o.$f3)]>0&&(q.$m6(o),H++)}if(H>0){var Z=f.$m38(U).$AL/(H+1),X=$.HF.$m11(q.$f1),Y=$.HF.$m11(q.$f1);for(C=0;C<q.$f1;C++){X[C]=g.indexOf(q.$rC(C).$f3)-k,X[C]>0&&(X[C]-=2*g.$f1),Y[C]=Z;for(x=0;x<C;x++)X[C]>X[x]?Y[x]+=Z:Y[C]+=Z}for(C=0;C<q.$f1;C++){var $$;o=q.$rC(C);($$=f.$m37(o)).$IP(),$$.$kM=new $.C.SJB.$w(0,0);var f$=f.$m38(U),n$=f.$m38(o.$f3),r$=this.$f.$f19.$AD(o)?f$.$AL/2:Y[C],t$=n$.$mJ+n$.$WL/2;$$.$jM=new $.C.SJB.$w(r$-f$.$AL/2,0),$$.$mV(f$.$lJ+r$,t$)}}}var i$=(u=this.$f.$f8.$hP(K.$rC(0))).top,l$=u.bottom;null!==u&&0===this.$f.$f7?i$=M-A:null!==u&&1===this.$f.$f7&&(l$=A-M),this.$f.$f8.$KV(K.$rC(0),new $.C.JJB(i$,u.left,l$,u.right))}},$f:null,$static:{T:new g(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$nI!":function(f,n){var r=$.T.ELB.$m(this.$f.$nP(f),this.$f.$nP(n));return 0!==r?r:$.T.ELB.$m(this.$f2.$nP(f),this.$f2.$nP(n))},$f1:null}}),T1:new g(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$nI!":function(f,n){return $.T.ELB.$D(this.$f.$bKg(f),this.$f.$bKg(n))},$f1:null}})}}}),$clinit:function(){$.T.ZED.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.AFD.$class,$.C.ZED.$class,K[3],K[4])}}}})}),m("_$$_jdb",function($){$._$_iqo=new v(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),m("_$$_jdb",function($){$._$_jqo=new v(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;